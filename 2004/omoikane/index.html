<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- START: two lines up starts content from: inc/top.default.html -->

<!-- END: this line ends content from: inc/top.default.html -->
<!-- START: this line starts content from: inc/head.default.html -->

<head>
<link rel="stylesheet" href="../../ioccc.css">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>2004/omoikane - Best Utility</title>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta name="description" content="2004 IOCCC entry omoikane - Best Utility">
<meta name="keywords" content="IOCCC, 2004, IOCCC 2004, IOCCC entry, omoikane, Best Utility">
</head>

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- !!! DO NOT MODIFY THIS FILE - This file is generated by a tool !!! -->
<!-- !!! DO NOT MODIFY THIS FILE - This file is generated by a tool !!! -->
<!-- !!! DO NOT MODIFY THIS FILE - This file is generated by a tool !!! -->
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->

<!-- END: this line ends content from: inc/head.default.html -->

<!-- -->
<!-- This web page was formed via the tool: bin/readme2index.sh -->
<!-- The content of main section of this web page came from: 2004/omoikane/README.md -->
<!-- -->

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- !!! Do not modify this web page, instead modify the file: 2004/omoikane/README.md !!! -->
<!-- !!! Do not modify this web page, instead modify the file: 2004/omoikane/README.md !!! -->
<!-- !!! Do not modify this web page, instead modify the file: 2004/omoikane/README.md !!! -->
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->

<!-- Markdown content was converted into HTML via the tool: bin/md2html.sh -->

<!-- START: this line starts content from: inc/body.default.html -->

<body>

<!-- END: this line ends content from: inc/body.default.html -->
<!-- START: this line starts content from: inc/topbar.default.html -->

<div class="theader">
  <nav class="topbar">
    <div class="container">
      <div class="logo">
        <a href="../../index.html" class="logo-link">
          IOCCC
       </a>
      </div>

      <div class="topbar-items">
        <div class="item">
          <span class="item-header">
            Entries
          </span>

          <div class="sub-item">
            <div class="outfit-font">
              <a href="../../years.html" class="sub-item-link">
                Winning Entries
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../authors.html" class="sub-item-link">
                People who have won
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../location.html" class="sub-item-link">
                Location of authors
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../bugs.html" class="sub-item-link">
                Bugs &amp; (Mis)features
              </a>
            </div>
          </div>
        </div>

        <div class="item">
          <span class="item-header">
            Status
          </span>

          <div class="sub-item">
            <div class="outfit-font">
              <a href="../../news.html" class="sub-item-link">
                IOCCC News
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../status.html" class="sub-item-link">
                Contest status
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../next/index.html" class="sub-item-link">
                Rules &amp; Guidelines
              </a>
            </div>
          </div>
        </div>

        <div class="item">
          <span class="item-header">
            FAQ
          </span>

          <div class="sub-item">
            <div class="outfit-font">
              <a href="../../faq.html" class="sub-item-link">
                  FAQ
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../faq.html#submit" class="sub-item-link">
                How to enter the IOCCC
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../faq.html#fix_an_entry" class="sub-item-link">
                Fixing IOCCC entries
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../faq.html#fix_web_site" class="sub-item-link">
                Fixing the web site
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../faq.html#fix_author" class="sub-item-link">
                Fixing author info
              </a>
            </div>
          </div>
        </div>

        <div class="item">
          <span class="item-header">
            About
          </span>

          <div class="sub-item">
            <div class="outfit-font">
              <a href="../../index.html" class="sub-item-link">
                IOCCC Home
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../judges.html" class="sub-item-link">
                The IOCCC Judges
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../contact.html" class="sub-item-link">
                Contacting the IOCCC
              </a>
            </div>

            <div class="outfit-font">
              <a href="../../thanks-for-help.html" class="sub-item-link">
                Thanks for the help
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="header-mobile-menu">
    <noscript>
      <a href="../../nojs-menu.html" class="topbar-js-label">
        Please Enable JavaScript
      </a>
    </noscript>

    <button id="header-open-menu-button" class="topbar-mobile-menu">
      <img
        src="../../png/hamburger-icon-open.png"
        alt="hamburger style menu icon - open state"
        width=48
        height=48>
    </button>

    <button id="header-close-menu-button" class="hide-content">
      <img
        src="../../png/hamburger-icon-closed.png"
        alt="hamburger style menu icon - closed state"
        width=48
        height=48>
    </button>

    <div id="mobile-menu-panel" class="hide-content">
      <div class="mobile-menu-container">

        <div class="mobile-menu-wrapper">
          <div class="mobile-menu-item">
            Entries
          </div>
          <div class="mobile-submenu-wrapper">

            <a class="mobile-submenu-item" href="../../years.html">
              Winning Entries
            </a>

            <a class="mobile-submenu-item" href="../../authors.html">
              People who have won
            </a>

            <a class="mobile-submenu-item" href="../../location.html">
              Location of authors
            </a>

            <a class="mobile-submenu-item" href="../../bugs.html">
              Bugs &amp; (Mis)features
            </a>

          </div>
        </div>

        <div class="mobile-menu-wrapper">

          <div class="mobile-menu-item">
            Status
          </div>
          <div class="mobile-submenu-wrapper">

            <a class="mobile-submenu-item" href="../../status.html">
              Contest status
            </a>

            <a class="mobile-submenu-item" href="../../next/index.html">
              Rules &amp; Guidelines
            </a>

            <a class="mobile-submenu-item" href="../../news.html">
              IOCCC News
            </a>

          </div>
        </div>

        <div class="mobile-menu-wrapper">
          <div class="mobile-menu-item">
            FAQ
          </div>
          <div class="mobile-submenu-wrapper">

            <a class="mobile-submenu-item" href="../../faq.html">
              Frequently Asked Questions
            </a>

            <a class="mobile-submenu-item" href="../../faq.html#submit">
              How to enter the IOCCC
            </a>

            <a class="mobile-submenu-item" href="../../faq.html#fix_an_entry">
              Fixing IOCCC entries
            </a>

            <a class="mobile-submenu-item" href="../../faq.html#fix_web_site">
              Fixing the web site
            </a>

            <a class="mobile-submenu-item" href="../../faq.html#fix_author">
              Fixing author info
            </a>

          </div>
        </div>

        <div class="mobile-menu-wrapper">
          <div class="mobile-menu-item">
            About
          </div>
          <div class="mobile-submenu-wrapper">

            <a class="mobile-submenu-item" href="../../index.html">
              IOCCC Home
            </a>

            <a class="mobile-submenu-item" href="../../judges.html">
              The IOCCC Judges
            </a>

            <a class="mobile-submenu-item" href="../../contact.html">
              Contacting the IOCCC
            </a>

            <a class="mobile-submenu-item" href="../../thanks-for-help.html">
              Thanks for the help
            </a>

          </div>
        </div>

      </div>
    </div>
  </div>

</div>

<script>
  var headerOpenMenuButton = document.getElementById("header-open-menu-button");
  var headerCloseMenuButton = document.getElementById("header-close-menu-button");
  var mobileMenuPanel = document.getElementById("mobile-menu-panel");

  headerOpenMenuButton.addEventListener("click", () => {
    headerOpenMenuButton.classList.remove("topbar-mobile-menu");
    headerOpenMenuButton.classList.add("hide-content");

    headerCloseMenuButton.classList.remove("hide-content");
    headerCloseMenuButton.classList.add("topbar-mobile-menu");

    mobileMenuPanel.classList.remove("hide-content");
    mobileMenuPanel.classList.add("topbar-mobile-panel");
  });

  headerCloseMenuButton.addEventListener("click", () => {
    headerCloseMenuButton.classList.remove("topbar-mobile-menu");
    headerCloseMenuButton.classList.add("hide-content");

    mobileMenuPanel.classList.add("hide-content");
    mobileMenuPanel.classList.remove("topbar-mobile-panel");

    headerOpenMenuButton.classList.add("topbar-mobile-menu");
    headerOpenMenuButton.classList.remove("hide-content");
  });
</script>

<!-- END: this line ends content from: inc/topbar.default.html -->
<!-- START: this line starts content from: inc/header.default.html -->

<div class="header">
  <a href="../../2011/zucker/index.html">
      <img src="../../png/ioccc.png"
	   alt="IOCCC image by Matt Zucker"
	   width=300 
	   height=110>
  </a>
  <h1>The International Obfuscated C Code Contest</h1>
  <h2>2004/omoikane - Best Utility</h2>
</div>

<!-- END: this line ends content from: inc/header.default.html -->
<!-- START: this line starts content from: inc/navbar.mid.html -->

<div class="navbar">
  <a class="Left" href="../newbern/index.html">&larr; newbern</a>
  <a class="Left" href="../index.html">&uarr; 2004 &uarr;</a>
  <a class="Left" href="../schnitzi/index.html">schnitzi &rarr;</a>
  <a class="Right" href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/omoikane.c">C code</a>
  <a class="Right" href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/Makefile">Makefile</a>
  <a class="Right" href="#inventory">Inventory</a>
  <a class="Right" href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fioccc-src.github.io%2Ftemp-test-ioccc%2F2004%2Fomoikane%2Findex.html">&#x2713;</a>
</div>

<!-- END: this line ends content from: inc/navbar.mid.html -->
<!-- START: this line starts content from: inc/before-content.default.html -->

    <div class="content" id="content">

<!-- END: this line ends content from: inc/before-content.default.html -->
<!-- START: this line starts content for HTML phase 20 by: bin/output-index-author.sh via bin/md2html.sh -->

<!-- START: this line starts content generated by: bin/output-index-author.sh -->

<h2 id="author">Author:</h2>
<ul>
<li>Name: <a href="../../authors.html#Don_Yang">Don Yang</a><br>
Location: <a href="../../location.html#US">US</a> - <em>United States of America</em> (<em>United States</em>)</li>
</ul>

<!-- END: next line ends content generated by: bin/output-index-author.sh -->

<!-- END: this line ends content for HTML phase 20 by: bin/output-index-author.sh via bin/md2html.sh -->
<!-- START: this line starts content for HTML phase 21 by: bin/pandoc-wrapper.sh via bin/md2html.sh -->

<!-- BEFORE: 1st line of markdown file: 2004/omoikane/README.md -->
<h2 id="to-build">To build:</h2>
<pre><code>    make</code></pre>
<h2 id="to-use">To use:</h2>
<pre><code>    ./omoikane infile layout outfile</code></pre>
<h2 id="try">Try:</h2>
<pre><code>    ./try.sh</code></pre>
<h2 id="judges-remarks">Judges’ remarks:</h2>
<p>For extra credit, spot the checksum in the source file itself.
What makes this one particularly interesting is that the checksum,
strictly speaking, isn’t being computed at all. Rather, the file
is modified to have the desired checksum! This does, we suppose,
solve the problem that inserting a checksum would change the file’s
checksum; if you have to change it, you might as well change it!</p>
<p>This program was submitted under the name <code>Rinia</code>, so the Author’s
Comments refer to it as such.</p>
<h2 id="authors-remarks">Author’s remarks:</h2>
<h3 id="rinia-11404"><code>Rinia</code> (1/14/04)</h3>
<p><code>Rinia</code> is a tool for embedding CRCs in text files. No need to assign
strange file names or package .SFVs with your files! <code>Rinia</code> will
insert a human-readable checksum string in the text itself! <code>^_^</code></p>
<h3 id="usage">Usage</h3>
<pre><code>    ./omoikane &lt;infile&gt; &lt;layout&gt; &lt;outfile&gt;</code></pre>
<p>All three arguments may reference the same file. All files is
assumed to be of ASCII character set.</p>
<h3 id="input">Input</h3>
<p>Any file larger than 8 bytes is valid. Upper limit on file size is
limited by memory.</p>
<p>If input file can’t be loaded for any reason, <code>Rinia</code> will say “bad
input” and exit immediately.</p>
<h3 id="layout">Layout</h3>
<p>The layout file contains a map of where <code>Rinia</code> can patch. The
content consists of marker characters (where <code>Rinia</code> is allowed to
change in the original text) and other characters (where the
original text will stay as is). <code>Rinia</code> will select the marker
character using these heuristics:</p>
<ol type="1">
<li>Ignore all space/control/extended characters.</li>
<li>Select characters that appeared 8 times in a row.</li>
<li>Of those selected characters, pick one with the lowest
frequency.</li>
</ol>
<p>One way to create the layout file is to make a copy of the original
file, replace where you want <code>Rinia</code> to match with a rare character,
then replace the remaining ones with space. Often it’s possible to
write the original file in such a way that it can be used as a
layout.</p>
<p>Example file/layout:</p>
<pre><code>    file:                layout:
       crc = ########       ... . XXXXXXXX
       patch = ######       ..... . XXXXXX
       other text here      ..... .... ....</code></pre>
<p>And <code>Rinia</code> may generate a file similar to this:</p>
<pre><code>    crc = 1bad73cf
    patch = #FR-QQ
    other text here</code></pre>
<p>Note that the original file by itself is a valid layout file, since
<code>Rinia</code> will recognize that only <code>#</code> marks enough space to hold the
checksum, and has the lowest frequency.</p>
<p>If layout file can’t be used for any reason, <code>Rinia</code> will say “bad
layout” and exit immediately.</p>
<h3 id="output-m">Output m</h3>
<p>If <code>Rinia</code> finds a usable checksum, she will say “OK.” and write to
the specified output file. Otherwise the exit message is “fail”
and nothing is written.</p>
<p>Chances of success and how long it takes to run to completion is
completely dominated by the layout file design. In general, <code>Rinia</code>
runs faster if the checksum is placed before the other marker
characters rather than after, e.g.:</p>
<pre><code>    a: X X XXX      b: XXXXXXXX     c: XXXXXXXX
       XXXXXXXX        X X XXX         XXXXX</code></pre>
<p><code>a</code> usually takes the longest time, while <code>c</code> usually is the
fastest.</p>
<p>That said, each run is randomized with respect to system time, so
it’s not always certain whether <code>Rinia</code> will succeed in a short time
or not. In general, 5 marker characters are sufficient, and takes
a few minutes.</p>
<p>For reference, <code>rinia.c</code> was produced on a 1.7GHz machine (the
checksum is at line 17). Out of 25 runs, the shortest was 2
seconds while the longest took 5 minutes. Average was about a
minute. Checksum for this file (<code>b7a81524</code>) took about 4 minutes.</p>
<h3 id="algorithm">Algorithm</h3>
<p>Inserting a checksum in the file you are computing the checksum of
isn’t quite trivial, since changing the file content would change
the final checksum value.</p>
<p>To insert the checksum, <code>Rinia</code> first assumes a random final
checksum, inserts that string, then modifies other parts to compensate
for the change in content.</p>
<p>The compensation bytes are very easy to compute for binary files
with enough consecutive scratch areas, but for text files with
non-consecutive areas and limited degrees of freedom, <code>Rinia</code> has to
try out all character combinations. This is done in a hierarchical
fashion, computing only smallest partial checksum after each
change.</p>
<p>For computers a few years old, this is probably still too slow to be
acceptable… but at the speed the IOCCC judges run the contest
these days, I am sure you have enough patience for it <code>_^</code></p>
<h3 id="source-code">Source code</h3>
<p><code>rinia.c</code> should compile anywhere (but with a few warnings). I don’t
have a big-endian machine to test but <code>Rinia</code> should work there as
well. ASCII character set required though.</p>
<p>Code is formatted to the shape of “<code>Rinia</code>” from the anime/game
“Moekko Company”. Of course at 90x50 it’s hard to recognize anything
<code>^_^</code></p>
<p><code>Rinia</code> is the slow but hardworking android. On some jobs she does
very well, on others she would spend lots of time and effort but
still fail…</p>
<!--

    Copyright © 1984-2024 by Landon Curt Noll. All Rights Reserved.

    You are free to share and adapt this file under the terms of this license:

        Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)

    For more information, see:

        https://creativecommons.org/licenses/by-sa/4.0/

-->
<!-- AFTER: last line of markdown file: 2004/omoikane/README.md -->

<!-- END: this line ends content for HTML phase 21 by: bin/pandoc-wrapper.sh via bin/md2html.sh -->
<!-- START: this line starts content for HTML phase 22 by: bin/output-index-inventory.sh via bin/md2html.sh -->

<!-- START: this line starts content generated by: bin/output-index-inventory.sh -->

<div id="inventory">
<h1 id="inventory-for-2004omoikane">Inventory for 2004/omoikane</h1>
</div>
<h2 id="primary-files">Primary files</h2>
<ul>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/omoikane.c">omoikane.c</a> - entry source code</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/Makefile">Makefile</a> - entry Makefile</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/omoikane.orig.c">omoikane.orig.c</a> - original source code</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/omoikane.info">omoikane.info</a> - information about Rinia</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/try.sh">try.sh</a> - script to try entry</li>
</ul>
<h2 id="secondary-files">Secondary files</h2>
<ul>
<li><a href="2004_omoikane.tar.bz2">2004_omoikane.tar.bz2</a> - download entry tarball</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/README.md">README.md</a> - markdown source for this web page</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/.entry.json">.entry.json</a> - entry summary and manifest in JSON</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/.gitignore">.gitignore</a> - list of files that should not be committed under git</li>
<li><a href="https://github.com/ioccc-src/temp-test-ioccc/blob/master/2004/omoikane/.path">.path</a> - directory path from top level directory</li>
<li><a href="index.html">index.html</a> - this web page</li>
</ul>
<hr style="width:10%;text-align:left;margin-left:0">
<h4>
Jump to: <a href="#">top</a>
</h4>

<!-- END: next line ends content generated by: bin/output-index-inventory.sh -->

<!-- END: this line ends content for HTML phase 22 by: bin/output-index-inventory.sh via bin/md2html.sh -->
<!-- START: this line starts content from: inc/after-content.default.html -->

    </div>

<!-- END: this line ends content from: inc/after-content.default.html -->
<!-- START: this line starts content from: inc/footer.default.html -->

<!--

    Copyright © 1984-2024 by Landon Curt Noll. All Rights Reserved.

    You are free to share and adapt this file under the terms of this license:

	Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)

    For more information, see:

	https://creativecommons.org/licenses/by-sa/4.0/

-->

<div class="footer">

    <div id="copyright"><h3>Copyright &copy; 1984-2024 by Landon Curt Noll:
	<a href="https://creativecommons.org/faq/#what-does-some-rights-reserved-mean"
	   target="_blank"
	   rel="license noopener noreferrer">Some Rights Reserved</a></h3>
	<p>
	This work is <b>licensed by Landon Curt Noll</b> under
	  <b><a href="https://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1"
	     target="_blank"
	     rel="license noopener noreferrer"
	     style="display:inline-block;">CC BY-SA 4.0</a></b>.
	  <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"
	       src="../../png/cc.png"
	       alt="cc inside circle symbol">
	  <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"
	       src="../../png/by.png"
	       alt="person inside circle symbol">
	  <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"
	       src="../../png/sa.png"
	       alt="arrow looping back on itself inside circle symbol"><br>
	You should <b>carefully review</b> the
	    <b><a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode.en"
		target="_blank"
		rel="license noopener noreferrer">CC BY-SA 4.0 LEGAL CODE</a></b>
	    before using the licensed material.<br>
	You may wish to review the
	    <b><a href="../../license.html"
		target="_blank"
		rel="license noopener noreferrer">highlights of some of the key features and terms</a></b>
	    of <b>CC BY-SA 4.0</b>.<br>
	</p>
    </div>

    <div id="coda"><h3>Coda</h3>
	<p>
	<a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fioccc-src.github.io%2Ftemp-test-ioccc%2F2004%2Fomoikane%2Findex.html" rel="nofollow">Nu HTML check this web page</a><br>
	<a href="#top">Jump to top</a> <a href="#content">Jump to Content</a> <a href="#inventory">Jump to Inventory</a><br>
	</p>
    </div>

</div>

<!-- END: this line ends content from: inc/footer.default.html -->
<!-- START: this line starts content from: inc/bottom.default.html -->

</body>
</html>

<!-- END: this line ends content from: inc/bottom.default.html -->
